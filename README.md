# Структура 
- Сервер.

   **database** содержит .txt файл с командами для создания базы данных.
   
   Класс **HandbookService** описывает поведение при CRUD операциях (Sql команды через prepared statements). 
   
   Класс **Database** описывает подключение БД (данные о БД считываются из конфига).
   
   В models классы описывают структуры, которые используются в БД.
   
- Клиент.

   Для работы с приложением нужна библиотека javafx, поэтому я ее закинула в папку **lib**.
   
   **Controller** выводит окно подключения к серверу (showConnectionDialog), а также выполняет инициализацию БД (вывод окна с таблицей) и т.д.
   
   **EditingCell** - редактирование отдельных ячеек (прямо в таблице). 
   
   **InsertDialog** - окно добавления данных в БД.
   
   **ProtocolPerformer** - интерфейс для реализации подключения(в зависимости от типа).
   
   **RestProtocolPerformer** - реализует вышеописанный интерфейс и реализует REST соединение (передает команды серверу и тд).
   
   
# Описание работы программы
Данные для БД были взяты [отсюда](https://ru.wikipedia.org/wiki/Jakarta_EE#Технологии).

Суть REST api в том, что данные принимаются и обрабатываются с помощью HTTP запросов или перехода по адресу. Для каждой операции есть свой адрес. Адрес этот задается в сервере в аннотации метода. Либо же в аннотации можно указывать тип запроса (GET, POST, DELETE, PUT и тд). И тогда уже выполнение CRUD операций можно будет выполнить через запросы.

В web.xml прописывается конфигурация сервиса (сервлеты, параметры и тд).


Приложение сервера сворачивается в war файл и деплоится на Tomcat сервер. Запускается Tomcat сервер и там уже можно получить доступ к сервису. В моем случае я в pom.xml указала, чтобы приложение компилировалось в war файл и создала параметр запуска через Tomcat Local.

Клиент запускается как и в предыдущих лабах. Дефолтный адрес уже стоит, но по факту нужен адрес, по которому сервис находится у tomcat.

По факту можно вместо написанного клиента использовать сервисы, в которых можно писать GET, POST, DELETE, PUT команды. Через такие запросы можно работать с сервером.

# Работа с интерфейсом клиента
В окне ввода порта по дефолту задан нужный, поэтому нужно просто нажать ОК.

При подключении клиента к серверу появится окно, в котором при правильном подключении должна быть заполненная данными таблица.

- Добавление данных: ctrl + A или Table -> Add.
- Удаление данных: нажать на необходимую строку и нажать Delete ИЛИ Table -> Remove ИЛИ ctrl + R. Для отображения изменений ctrl + S или Table -> Synchronize.
- Редактирование данных.

    Первый способ. Можно дважды кликнуть на нужную ячейку, изменить ее и нажать Enter. Тогда будут внесены изменения ТОЛЬКО этой ячейки в БД.

    Второй способ. Можно дважды кликнуть на нужную ячейку, изменить ее и нажать F1. Изменение будет зафиксировано, но не будет занесено в БД. Так можно отредактировать остальные необходимые ячейки и дальше нажать ctrl + U ИЛИ Table -> Update. 

    Для отображения изменений ctrl + S или Table -> Synchronize.
- Для отмены изменения ячейки после двойного клика по ней нужно нажать Esc.

P.S. Не знаю почему так, но клиент бывает на каких-то действиях зависает, и для дальнейшей работы нужно перезапустить сервер tomcat. 

# Запуск

- Для сервера:

    Нужно создать параметр запуска через Tomcat -> Local. Во вкладке Deployment добавить war артефакт. Application context и URL должны обновиться сами. При запуске сервера war файл приложение задеплоится на сервер и автоматом откроется браузер в нужном адресе. Должно быть типа так:
	
	`http://localhost:8080/`

- Для клиента:

    Для клиента нужно добавить в modules библиотеку javafx, которая находится в папке lib, а в параметры запуска в VM Options нужно добавить 
    
   `--module-path "lib\javafx-sdk-11.0.2\lib" --add-modules=javafx.controls,javafx.fxml`
   
   При получении той же ссылки как и у меня (выше указана) адрес сервера можно не менять и сразу нажимать ОК.
